<!-- Copyright 2018 Google LLC. All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
==============================================================================-->


<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport"
      content="width=device-width">

<title>Context Atlas</title>

<head>
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet"
        href="https://code.getmdl.io/1.3.0/material.green-light_green.min.css">
  <script defer=""
          src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <link rel="stylesheet"
        href="./index.css">
  <link rel="stylesheet"
        href="./dropdown.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.10.3/math.js"></script>
</head>

<body>
  <div id='info-bar'>
    <div id="top-bar">
      <div id='title-words'>Context Atlas
        <!-- <a href="https://ai.google/research/teams/brain/pair"><img id='logo'
               src='./pair_logo_darkbg.png'></a> -->
      </div>
      <div>
        <a href="https://github.com/PAIR-code/interpretability/tree/master/context-atlas"
           target="_blank">
          <i class="material-icons"
             title="Code">
            link
          </i>
        </a>
        <a href="https://arxiv.org/abs/1906.02715"
           target="_blank">
          <i class="material-icons"
             title="Paper">
            description
          </i>
        </a>
      </div>
    </div>
    <div id="inputs">
      <div id='expand'
           class="material-icons">expand_more
      </div>
      <div>
        <div id='info'>
          In transformer models like DistilBERT, a word's embedding is defined by its linguistic context.

          Type in one of the sample Chintang words () to see it in different sentence contexts from the ACQDIV corpus.
          <i class="material-icons info-icon"
             title="Data licensed under CC-BY-SA-3.0">
            info
          </i>
          <br>
          <br>
          Each point is the
          query word's embedding at the selected layer, projected into two dimensions using <a
             href='https://umap-learn.readthedocs.io/en/latest/'
             target='_blank'>UMAP</a>.
          <br>
          <br>
          The labels are words that are common between sentences in a cluster.
          <i class="material-icons info-icon"
             title="We highlight words that appear in many sentences clustered in a small area, as measured by the median distance between sentences containing those words. We also show only as many labels as can fit without overlapping.">
            info
          </i>
          <br>
          <br>
          Visualization created based on <a href='https://ai.google/research/teams/brain/pair'
             target="_blank">Google PAIR</a>. See <a
             href='https://pair-code.github.io/interpretability/context-atlas/blogpost/index.html'
             target="_blank">their blogpost</a> for more details.
        </div>
      </div>
      <!-- Input for word -->
      <div id='words-selector'></div>

      <div id='toggles'
           class='hidden'>

        <div style='display: flex; justify-content: space-between;'>

          <!-- Switch for whether to show POS.-->
          <div class='toggle'>
            <div id='pos'
                 title="Tagged using the Natural Language Toolkit API www.nltk.org.">
              POS
              <i class="material-icons info-icon">
                help
              </i>
            </div>
            <div>
              <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect"
                     for="pos-switch">
                <input type="checkbox"
                       id="pos-switch"
                       class="mdl-switch__input">
                <span class="mdl-switch__label"></span>
              </label>
            </div>
          </div>
          <!-- Dropdown for layer -->
          <div class='toggle'> Layer
            <select id="dropdown"
                    name="layer">
              <option value="5">5 (Last) </option>
              <option value="4">4</option>
              <option value="3">3</option>
              <option value="2">2</option>
              <option value="1">1</option>
              <option value="0">0 (First) </option>
            </select>
          </div>

        </div>
        <div class='toggle'
             id='search-in-sentences'></div>
      </div>
    </div>
  </div>
  <div id="legend"
       class="hidden"></div>
  <div id="diagram">
  </div>
  <script src="./index.ts"></script>
</body>
